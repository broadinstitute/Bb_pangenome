# Snakefiles README

>Configs are located in ../configs/

To run these workflows, ensure you have the following:
- All relevant containers are downloaded and converted to singularity/apptainers. (Alternatively, update the snakefiles to use docker.)
- config file has been updated with correct paths for your machine.
- config file has been updated with the correct runtime resources for your machine.

## `annotate_all_assemblies_v3.smk`

config: `../config/pangenome_analysis.yaml`

### Input
- Directory of fasta files to annotate.

### Output
- Directory of annotations generated by Bakta.
- Quast report
- AGAT stats
- MultiQC report

***

## `get_mlst_type.smk`

config: `../config/singularity_config.yaml`

> It is likely easier to just run this within an interactive docker container.
> `docker run -v $(pwd):/data -it sangerpathogens/mlst_check:latest /bin/bash`
> `get_sequence_type -d $(nproc) -s 'Borrelia' -c -o mlst_check_out input1.fasta input2.fasta ...`
>
> Instead of this snakemake workflow, use the script: `../scripts/get_mlst.sh`


### Input
- Directory of fasta files to classify.

### Output
- Directory output by mlst_check(Allele classification table, allele sequence table, unknown allele sequences if applicable)

***

## `kraken2_QC.smk`

config: `../config/pangenome_analysis.yaml`

### Input
- Directory of assemblies to classify with Kraken2

### Output
- Kraken2 results
- Krona report
- Interactive krona plot of results

***

## `pan_genome_analysis_v5.smk`

config: `../config/pangenome_analysis.yaml`

This workflow runs roary analysis, tree construction, and pangenome annotation using bakta.

1. Roary is called on all gff3 files for the input assemblies.
2. Roary core_gene_aln is used to construct a phylogenetic tree using FastTree
3. Roary core_gene_aln is used to construct a phylogenetic tree using RAxML
4. Roary pangenome is annotated with bakta.

### Input
- Directory of GFF3 files to classify.

### Output
- Roary pangenome output
- Fasttree phylogenetic tree
- RAxML phylogenetic tree
- Bakta annotations of the output pangenome.